generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model JournalEntry {
  id           Int            @id @default(autoincrement())
  userId       String         @map("user_id")
  entryDate    DateTime       @map("entry_date")
  users        User           @relation(fields: [userId], references: [id])
  nutritionLog NutritionLog?

  @@unique([userId, entryDate], name: "user_entry_date_unique")
  @@map("journal_entry")
}

model User {
  id           String          @id @default(dbgenerated())
  createdAt    DateTime        @map("created_at") @default(now())
  username     String          @unique
  fullName     String?         @map("full_name")
  email        String          @unique
  password     String
  journalEntry JournalEntry[]

  @@map("users")
}

model NutritionLog {
  id            Int           @id @default(autoincrement())
  journalId     Int           @map("journal_id") @unique @default(autoincrement())
  waterConsumed Int           @map("water_consumed") @default(0)
  journalEntry  JournalEntry  @relation(fields: [journalId], references: [id])

  @@map("nutrition_log")
}
